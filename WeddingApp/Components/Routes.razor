@using WeddingApp.Components.Account.Shared
@using WeddingApp.Components.Layout

<Router AppAssembly="@typeof(Program).Assembly" AdditionalAssemblies="[ typeof(WeddingApp.Components._Imports).Assembly ]">
    <Found Context="routeData">
        <AuthorizeRouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)">
            <NotAuthorized>
                @if (!(context.User.Identity?.IsAuthenticated ?? true))
                {
                    <RedirectToLogin/>
                }
                else
                {
                    <div class="container">
                        <div class="glass-card text-center" style="margin-top: var(--space-3xl);">
                            <h3>Access Denied</h3>
                            <p>You don't have permission to view this page.</p>
                            <a href="/" class="btn btn-primary mt-3">Go Home</a>
                        </div>
                    </div>
                }
            </NotAuthorized>

            <Authorizing>
                <div class="container">
                    <div class="text-center" style="margin-top: var(--space-3xl);">
                        <div class="spinner"></div>
                        <p>Loading...</p>
                    </div>
                </div>
            </Authorizing>
        </AuthorizeRouteView>
    </Found>

    <NotFound>
        <LayoutView Layout="@typeof(MainLayout)">
            <div class="container">
                <div class="glass-card text-center" style="margin-top: var(--space-3xl);">
                    <h1 style="font-size: var(--text-4xl); color: var(--primary);">404</h1>
                    <h3>Page Not Found</h3>
                    <p>Sorry, we couldn't find the page you're looking for.</p>
                    <a href="/" class="btn btn-primary mt-3">Go Home</a>
                </div>
            </div>
        </LayoutView>
    </NotFound>
</Router>